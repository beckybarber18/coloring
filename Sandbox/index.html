<html>
	<head>
		<title>ColoRing</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<div id="container"</div>
		<script src="js/three.js"></script>
		<script>
			var container, stats;
			var views, scene, renderer;
			var mouseX = 0, mouseY = 0;
			var windowWidth, windowHeight;

			var views = [
				{
					left: 0,
					bottom: 0,
					width: 0.5,
					height: 1.0,
					background: new THREE.Color( 0.5, 0.5, 0.7 ),
					eye: [0, 10, 0],
					up: [0, 1, 0],
					fov: 30
				},
				{
					left: 0.5,
					bottom: 0,
					width: 0.5,
					height: 1.0,
					background: new THREE.Color( 0.7, 0.5, 0.5 ),
					eye: [10, 0, 0],
					up: [-1, 0, 0],
					fov: 30
				}
			]

			init();
			animate();

			function init() {
				container = document.getElementById( 'container' );

				for ( var ii = 0; ii < views.length; ++ ii ) {
					var view = views[ ii ];
					var camera = new THREE.PerspectiveCamera( view.fov, window.innerWidth / window.innerHeight, 1, 10000 );
					camera.position.fromArray( view.eye );
					camera.up.fromArray( view.up );
					view.camera = camera;
				}

				scene = new THREE.Scene();
				// var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );

				var boxGeometry = new THREE.BoxGeometry( 5, 5, 5 );
				var boxMaterial = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );

				for ( var i = 0; i < 500; i ++ ) {
					var box = new THREE.Mesh( boxGeometry, boxMaterial );
					box.position.x = Math.floor( Math.random() * 20 - 10 ) * 20;
					box.position.y = Math.floor( Math.random() * 20 - 10 ) * 20;
					box.position.z = Math.floor( Math.random() * 20 - 10 ) * 20;
					scene.add( box );
				}

				/*

				renderer = new THREE.WebGLRenderer();
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );
				*/

				renderer = new THREE.WebGLRenderer( { antialias: true } );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				container.appendChild( renderer.domElement );
			}

			function updateSize() {
				if ( windowWidth != window.innerWidth || windowHeight != window.innerHeight ) {
					windowWidth = window.innerWidth;
					windowHeight = window.innerHeight;
					renderer.setSize( windowWidth, windowHeight );
				}
			}

			function animate() {
				render();
				requestAnimationFrame( animate );
			}

			function render() {
				updateSize();
				for ( var ii = 0; ii < views.length; ++ ii ) {
					var view = views[ ii ];
					var camera = view.camera;
					var left = Math.floor( windowWidth * view.left );
					var bottom = Math.floor( windowHeight * view.bottom );
					var width = Math.floor( windowWidth * view.width );
					var height = Math.floor( windowHeight * view.height );
					renderer.setViewport( left, bottom, width, height );
					renderer.setScissor( left, bottom, width, height );
					renderer.setScissorTest( true );
					renderer.setClearColor( view.background );
					camera.aspect = width / height;
					camera.updateProjectionMatrix();
					renderer.render( scene, camera );
				}
			}
		</script>
	</body>
</html>
